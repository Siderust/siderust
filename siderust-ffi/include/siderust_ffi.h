#include "tempoch_ffi.h"


#ifndef SIDERUST_FFI_H
#define SIDERUST_FFI_H

/* Warning: this file is auto-generated by cbindgen. Do not modify manually. */

#include <stdarg.h>
#include <stdbool.h>
#include <stdint.h>
#include <stdlib.h>

// Crossing event direction.
enum siderust_crossing_direction_t
#ifdef __cplusplus
  : int32_t
#endif // __cplusplus
 {
  SIDERUST_CROSSING_DIRECTION_T_RISING = 0,
  SIDERUST_CROSSING_DIRECTION_T_SETTING = 1,
};
#ifndef __cplusplus
typedef int32_t siderust_crossing_direction_t;
#endif // __cplusplus

// Culmination event kind.
enum siderust_culmination_kind_t
#ifdef __cplusplus
  : int32_t
#endif // __cplusplus
 {
  SIDERUST_CULMINATION_KIND_T_MAX = 0,
  SIDERUST_CULMINATION_KIND_T_MIN = 1,
};
#ifndef __cplusplus
typedef int32_t siderust_culmination_kind_t;
#endif // __cplusplus

// Status codes returned by every siderust-ffi function.
//
// Callers must inspect this value before reading any output parameters.
enum siderust_status_t
#ifdef __cplusplus
  : int32_t
#endif // __cplusplus
 {
  // Success.
  SIDERUST_STATUS_T_OK = 0,
  // A required output pointer was null.
  SIDERUST_STATUS_T_NULL_POINTER = 1,
  // The requested coordinate frame is unsupported or invalid.
  SIDERUST_STATUS_T_INVALID_FRAME = 2,
  // The requested coordinate center is unsupported or invalid.
  SIDERUST_STATUS_T_INVALID_CENTER = 3,
  // Coordinate transformation failed.
  SIDERUST_STATUS_T_TRANSFORM_FAILED = 4,
  // Unknown or invalid body identifier.
  SIDERUST_STATUS_T_INVALID_BODY = 5,
  // Star name not found in the built-in catalog.
  SIDERUST_STATUS_T_UNKNOWN_STAR = 6,
  // Period bounds are invalid (start > end).
  SIDERUST_STATUS_T_INVALID_PERIOD = 7,
  // Memory allocation failed.
  SIDERUST_STATUS_T_ALLOCATION_FAILED = 8,
  // One or more arguments are out of range or otherwise invalid.
  SIDERUST_STATUS_T_INVALID_ARGUMENT = 9,
};
#ifndef __cplusplus
typedef int32_t siderust_status_t;
#endif // __cplusplus

// Reference frame identifier for C interop.
enum siderust_frame_t
#ifdef __cplusplus
  : int32_t
#endif // __cplusplus
 {
  SIDERUST_FRAME_T_ICRS = 1,
  SIDERUST_FRAME_T_ECLIPTIC_MEAN_J2000 = 2,
  SIDERUST_FRAME_T_EQUATORIAL_MEAN_J2000 = 3,
  SIDERUST_FRAME_T_EQUATORIAL_MEAN_OF_DATE = 4,
  SIDERUST_FRAME_T_EQUATORIAL_TRUE_OF_DATE = 5,
  SIDERUST_FRAME_T_HORIZONTAL = 6,
  SIDERUST_FRAME_T_ECEF = 7,
  SIDERUST_FRAME_T_GALACTIC = 8,
  SIDERUST_FRAME_T_GCRS = 9,
  SIDERUST_FRAME_T_ECLIPTIC_OF_DATE = 10,
  SIDERUST_FRAME_T_ECLIPTIC_TRUE_OF_DATE = 11,
  SIDERUST_FRAME_T_CIRS = 12,
  SIDERUST_FRAME_T_TIRS = 13,
  SIDERUST_FRAME_T_ITRF = 14,
  SIDERUST_FRAME_T_ICRF = 15,
};
#ifndef __cplusplus
typedef int32_t siderust_frame_t;
#endif // __cplusplus

// Azimuth extremum kind (maximum or minimum bearing).
enum siderust_azimuth_extremum_kind_t
#ifdef __cplusplus
  : int32_t
#endif // __cplusplus
 {
  SIDERUST_AZIMUTH_EXTREMUM_KIND_T_MAX = 0,
  SIDERUST_AZIMUTH_EXTREMUM_KIND_T_MIN = 1,
};
#ifndef __cplusplus
typedef int32_t siderust_azimuth_extremum_kind_t;
#endif // __cplusplus

// Proper motion RA convention.
enum siderust_ra_convention_t
#ifdef __cplusplus
  : int32_t
#endif // __cplusplus
 {
  // True RA rate µα (deg/yr).
  SIDERUST_RA_CONVENTION_T_MU_ALPHA = 0,
  // Catalog rate µα★ = µα cos(δ) (deg/yr).
  SIDERUST_RA_CONVENTION_T_MU_ALPHA_STAR = 1,
};
#ifndef __cplusplus
typedef int32_t siderust_ra_convention_t;
#endif // __cplusplus

// Reference center identifier for C interop.
enum siderust_center_t
#ifdef __cplusplus
  : int32_t
#endif // __cplusplus
 {
  SIDERUST_CENTER_T_BARYCENTRIC = 1,
  SIDERUST_CENTER_T_HELIOCENTRIC = 2,
  SIDERUST_CENTER_T_GEOCENTRIC = 3,
  SIDERUST_CENTER_T_TOPOCENTRIC = 4,
  SIDERUST_CENTER_T_BODYCENTRIC = 5,
};
#ifndef __cplusplus
typedef int32_t siderust_center_t;
#endif // __cplusplus

// Principal lunar phase kind.
enum siderust_phase_kind_t
#ifdef __cplusplus
  : int32_t
#endif // __cplusplus
 {
  SIDERUST_PHASE_KIND_T_NEW_MOON = 0,
  SIDERUST_PHASE_KIND_T_FIRST_QUARTER = 1,
  SIDERUST_PHASE_KIND_T_FULL_MOON = 2,
  SIDERUST_PHASE_KIND_T_LAST_QUARTER = 3,
};
#ifndef __cplusplus
typedef int32_t siderust_phase_kind_t;
#endif // __cplusplus

// Named phase label (includes intermediate phases).
enum siderust_moon_phase_label_t
#ifdef __cplusplus
  : int32_t
#endif // __cplusplus
 {
  SIDERUST_MOON_PHASE_LABEL_T_NEW_MOON = 0,
  SIDERUST_MOON_PHASE_LABEL_T_WAXING_CRESCENT = 1,
  SIDERUST_MOON_PHASE_LABEL_T_FIRST_QUARTER = 2,
  SIDERUST_MOON_PHASE_LABEL_T_WAXING_GIBBOUS = 3,
  SIDERUST_MOON_PHASE_LABEL_T_FULL_MOON = 4,
  SIDERUST_MOON_PHASE_LABEL_T_WANING_GIBBOUS = 5,
  SIDERUST_MOON_PHASE_LABEL_T_LAST_QUARTER = 6,
  SIDERUST_MOON_PHASE_LABEL_T_WANING_CRESCENT = 7,
};
#ifndef __cplusplus
typedef int32_t siderust_moon_phase_label_t;
#endif // __cplusplus

// Opaque handle to a Star. Created via `siderust_star_*` functions, freed
// with `siderust_star_free`.
typedef struct SiderustStar SiderustStar;

// Opaque handle representing an ICRS celestial target (RA/Dec).
typedef struct SiderustTarget SiderustTarget;

// A threshold-crossing event.
typedef struct siderust_crossing_event_t {
  // Time of the crossing (Modified Julian Date).
  double mjd;
  // Direction of the crossing.
  siderust_crossing_direction_t direction;
} siderust_crossing_event_t;

// A culmination (local extremum in altitude) event.
typedef struct siderust_culmination_event_t {
  // Time of the culmination (Modified Julian Date).
  double mjd;
  // Altitude at the extremum in degrees.
  double altitude_deg;
  // Kind of extremum.
  siderust_culmination_kind_t kind;
} siderust_culmination_event_t;

// Geodetic position (WGS84) for C interop.
typedef struct siderust_geodetic_t {
  // Longitude in degrees (east positive).
  double lon_deg;
  // Latitude in degrees (north positive).
  double lat_deg;
  // Height above ellipsoid in metres.
  double height_m;
} siderust_geodetic_t;

// Search options for altitude computations.
typedef struct siderust_search_opts_t {
  // Time tolerance in days (default: ~1 µs = 1e-9 days).
  double time_tolerance_days;
  // Scan step in days. Set to 0 or negative to use the body's default.
  double scan_step_days;
  // Whether `scan_step_days` is valid (non-zero).
  bool has_scan_step;
} siderust_search_opts_t;

// Altitude computation query parameters.
typedef struct siderust_altitude_query_t {
  struct siderust_geodetic_t observer;
  double start_mjd;
  double end_mjd;
  double min_altitude_deg;
  double max_altitude_deg;
} siderust_altitude_query_t;

// Spherical direction (lon/lat or RA/Dec) in degrees.
typedef struct siderust_spherical_dir_t {
  // Polar angle / latitude in degrees.
  double polar_deg;
  // Azimuth / longitude / right ascension in degrees.
  double azimuth_deg;
  // Reference frame.
  siderust_frame_t frame;
} siderust_spherical_dir_t;

// An azimuth bearing-crossing event.
typedef struct siderust_azimuth_crossing_event_t {
  // Time of the event (Modified Julian Date).
  double mjd;
  // Crossing direction.
  siderust_crossing_direction_t direction;
  uint8_t _pad[4];
} siderust_azimuth_crossing_event_t;

// An azimuth extremum (minimum or maximum bearing).
typedef struct siderust_azimuth_extremum_t {
  // Time of the extremum (Modified Julian Date).
  double mjd;
  // Azimuth at the extremum, in degrees.
  double azimuth_deg;
  // Kind of extremum.
  siderust_azimuth_extremum_kind_t kind;
  uint8_t _pad[4];
} siderust_azimuth_extremum_t;

// Proper motion of a star (equatorial).
typedef struct siderust_proper_motion_t {
  // RA proper motion in degrees per Julian year.
  double pm_ra_deg_yr;
  // Dec proper motion in degrees per Julian year.
  double pm_dec_deg_yr;
  // Convention for `pm_ra`.
  siderust_ra_convention_t ra_convention;
} siderust_proper_motion_t;

// Keplerian orbital elements.
typedef struct siderust_orbit_t {
  double semi_major_axis_au;
  double eccentricity;
  double inclination_deg;
  double lon_ascending_node_deg;
  double arg_perihelion_deg;
  double mean_anomaly_deg;
  double epoch_jd;
} siderust_orbit_t;

// Planet data (value type, copyable).
typedef struct siderust_planet_t {
  double mass_kg;
  double radius_km;
  struct siderust_orbit_t orbit;
} siderust_planet_t;

// Cartesian position (x, y, z + metadata).
typedef struct siderust_cartesian_pos_t {
  double x;
  double y;
  double z;
  siderust_frame_t frame;
  siderust_center_t center;
} siderust_cartesian_pos_t;

// A principal lunar phase event.
typedef struct siderust_phase_event_t {
  // Time of the event (Modified Julian Date).
  double mjd;
  // Phase kind.
  siderust_phase_kind_t kind;
  uint8_t _pad[4];
} siderust_phase_event_t;

// Moon phase geometry at a given instant.
typedef struct siderust_moon_phase_geometry_t {
  // Phase angle in radians.
  double phase_angle_rad;
  // Fraction of the Moon's disk that is illuminated (0–1).
  double illuminated_fraction;
  // Elongation in radians.
  double elongation_rad;
  // Non-zero if waxing, zero if waning.
  uint8_t waxing;
  uint8_t _pad[7];
} siderust_moon_phase_geometry_t;

#ifdef __cplusplus
extern "C" {
#endif // __cplusplus

// Returns the siderust-ffi ABI version (major*10000 + minor*100 + patch).
 uint32_t siderust_ffi_version(void);

// Free an array of MJD periods.
 void siderust_periods_free(tempoch_period_mjd_t *ptr, uintptr_t count);

// Free an array of crossing events.
 void siderust_crossings_free(struct siderust_crossing_event_t *ptr, uintptr_t count);

// Free an array of culmination events.
 void siderust_culminations_free(struct siderust_culmination_event_t *ptr, uintptr_t count);

// Altitude of the Sun at an instant (radians).

siderust_status_t siderust_sun_altitude_at(struct siderust_geodetic_t observer,
                                           double mjd,
                                           double *out_rad);

// Periods when the Sun is above a threshold altitude.

siderust_status_t siderust_sun_above_threshold(struct siderust_geodetic_t observer,
                                               tempoch_period_mjd_t window,
                                               double threshold_deg,
                                               struct siderust_search_opts_t opts,
                                               tempoch_period_mjd_t **out,
                                               uintptr_t *count);

// Periods when the Sun is below a threshold altitude.

siderust_status_t siderust_sun_below_threshold(struct siderust_geodetic_t observer,
                                               tempoch_period_mjd_t window,
                                               double threshold_deg,
                                               struct siderust_search_opts_t opts,
                                               tempoch_period_mjd_t **out,
                                               uintptr_t *count);

// Threshold-crossing events for the Sun.

siderust_status_t siderust_sun_crossings(struct siderust_geodetic_t observer,
                                         tempoch_period_mjd_t window,
                                         double threshold_deg,
                                         struct siderust_search_opts_t opts,
                                         struct siderust_crossing_event_t **out,
                                         uintptr_t *count);

// Culmination (local extrema) events for the Sun.

siderust_status_t siderust_sun_culminations(struct siderust_geodetic_t observer,
                                            tempoch_period_mjd_t window,
                                            struct siderust_search_opts_t opts,
                                            struct siderust_culmination_event_t **out,
                                            uintptr_t *count);

// Periods when the Sun's altitude is within [min, max].

siderust_status_t siderust_sun_altitude_periods(struct siderust_altitude_query_t query,
                                                tempoch_period_mjd_t **out,
                                                uintptr_t *count);

// Altitude of the Moon at an instant (radians).

siderust_status_t siderust_moon_altitude_at(struct siderust_geodetic_t observer,
                                            double mjd,
                                            double *out_rad);

// Periods when the Moon is above a threshold altitude.

siderust_status_t siderust_moon_above_threshold(struct siderust_geodetic_t observer,
                                                tempoch_period_mjd_t window,
                                                double threshold_deg,
                                                struct siderust_search_opts_t opts,
                                                tempoch_period_mjd_t **out,
                                                uintptr_t *count);

// Periods when the Moon is below a threshold altitude.

siderust_status_t siderust_moon_below_threshold(struct siderust_geodetic_t observer,
                                                tempoch_period_mjd_t window,
                                                double threshold_deg,
                                                struct siderust_search_opts_t opts,
                                                tempoch_period_mjd_t **out,
                                                uintptr_t *count);

// Threshold-crossing events for the Moon.

siderust_status_t siderust_moon_crossings(struct siderust_geodetic_t observer,
                                          tempoch_period_mjd_t window,
                                          double threshold_deg,
                                          struct siderust_search_opts_t opts,
                                          struct siderust_crossing_event_t **out,
                                          uintptr_t *count);

// Culmination (local extrema) events for the Moon.

siderust_status_t siderust_moon_culminations(struct siderust_geodetic_t observer,
                                             tempoch_period_mjd_t window,
                                             struct siderust_search_opts_t opts,
                                             struct siderust_culmination_event_t **out,
                                             uintptr_t *count);

// Periods when the Moon's altitude is within [min, max].

siderust_status_t siderust_moon_altitude_periods(struct siderust_altitude_query_t query,
                                                 tempoch_period_mjd_t **out,
                                                 uintptr_t *count);

// Altitude of a star at an instant (radians).

siderust_status_t siderust_star_altitude_at(const struct SiderustStar *handle,
                                            struct siderust_geodetic_t observer,
                                            double mjd,
                                            double *out_rad);

// Periods when a star is above a threshold altitude.

siderust_status_t siderust_star_above_threshold(const struct SiderustStar *handle,
                                                struct siderust_geodetic_t observer,
                                                tempoch_period_mjd_t window,
                                                double threshold_deg,
                                                struct siderust_search_opts_t opts,
                                                tempoch_period_mjd_t **out,
                                                uintptr_t *count);

// Periods when a star is below a threshold altitude.

siderust_status_t siderust_star_below_threshold(const struct SiderustStar *handle,
                                                struct siderust_geodetic_t observer,
                                                tempoch_period_mjd_t window,
                                                double threshold_deg,
                                                struct siderust_search_opts_t opts,
                                                tempoch_period_mjd_t **out,
                                                uintptr_t *count);

// Threshold-crossing events for a star.

siderust_status_t siderust_star_crossings(const struct SiderustStar *handle,
                                          struct siderust_geodetic_t observer,
                                          tempoch_period_mjd_t window,
                                          double threshold_deg,
                                          struct siderust_search_opts_t opts,
                                          struct siderust_crossing_event_t **out,
                                          uintptr_t *count);

// Culmination events for a star.

siderust_status_t siderust_star_culminations(const struct SiderustStar *handle,
                                             struct siderust_geodetic_t observer,
                                             tempoch_period_mjd_t window,
                                             struct siderust_search_opts_t opts,
                                             struct siderust_culmination_event_t **out,
                                             uintptr_t *count);

// Altitude of an ICRS direction at an instant (radians).

siderust_status_t siderust_icrs_altitude_at(struct siderust_spherical_dir_t dir,
                                            struct siderust_geodetic_t observer,
                                            double mjd,
                                            double *out_rad);

// Periods when an ICRS direction is above a threshold altitude.

siderust_status_t siderust_icrs_above_threshold(struct siderust_spherical_dir_t dir,
                                                struct siderust_geodetic_t observer,
                                                tempoch_period_mjd_t window,
                                                double threshold_deg,
                                                struct siderust_search_opts_t opts,
                                                tempoch_period_mjd_t **out,
                                                uintptr_t *count);

// Periods when an ICRS direction is below a threshold altitude.

siderust_status_t siderust_icrs_below_threshold(struct siderust_spherical_dir_t dir,
                                                struct siderust_geodetic_t observer,
                                                tempoch_period_mjd_t window,
                                                double threshold_deg,
                                                struct siderust_search_opts_t opts,
                                                tempoch_period_mjd_t **out,
                                                uintptr_t *count);

// Free an array of azimuth crossing events.

void siderust_azimuth_crossings_free(struct siderust_azimuth_crossing_event_t *ptr,
                                     uintptr_t count);

// Free an array of azimuth extrema.
 void siderust_azimuth_extrema_free(struct siderust_azimuth_extremum_t *ptr, uintptr_t count);

// Azimuth of the Sun at an instant (degrees, North-clockwise).

siderust_status_t siderust_sun_azimuth_at(struct siderust_geodetic_t observer,
                                          double mjd,
                                          double *out_deg);

// Azimuth bearing-crossing events for the Sun.

siderust_status_t siderust_sun_azimuth_crossings(struct siderust_geodetic_t observer,
                                                 tempoch_period_mjd_t window,
                                                 double bearing_deg,
                                                 struct siderust_search_opts_t opts,
                                                 struct siderust_azimuth_crossing_event_t **out,
                                                 uintptr_t *count);

// Azimuth extrema (northernmost and southernmost bearing) for the Sun.

siderust_status_t siderust_sun_azimuth_extrema(struct siderust_geodetic_t observer,
                                               tempoch_period_mjd_t window,
                                               struct siderust_search_opts_t opts,
                                               struct siderust_azimuth_extremum_t **out,
                                               uintptr_t *count);

// Periods when the Sun's azimuth is within [min_deg, max_deg].

siderust_status_t siderust_sun_in_azimuth_range(struct siderust_geodetic_t observer,
                                                tempoch_period_mjd_t window,
                                                double min_deg,
                                                double max_deg,
                                                struct siderust_search_opts_t opts,
                                                tempoch_period_mjd_t **out,
                                                uintptr_t *count);

// Azimuth of the Moon at an instant (degrees, North-clockwise).

siderust_status_t siderust_moon_azimuth_at(struct siderust_geodetic_t observer,
                                           double mjd,
                                           double *out_deg);

// Azimuth bearing-crossing events for the Moon.

siderust_status_t siderust_moon_azimuth_crossings(struct siderust_geodetic_t observer,
                                                  tempoch_period_mjd_t window,
                                                  double bearing_deg,
                                                  struct siderust_search_opts_t opts,
                                                  struct siderust_azimuth_crossing_event_t **out,
                                                  uintptr_t *count);

// Azimuth extrema for the Moon.

siderust_status_t siderust_moon_azimuth_extrema(struct siderust_geodetic_t observer,
                                                tempoch_period_mjd_t window,
                                                struct siderust_search_opts_t opts,
                                                struct siderust_azimuth_extremum_t **out,
                                                uintptr_t *count);

// Periods when the Moon's azimuth is within [min_deg, max_deg].

siderust_status_t siderust_moon_in_azimuth_range(struct siderust_geodetic_t observer,
                                                 tempoch_period_mjd_t window,
                                                 double min_deg,
                                                 double max_deg,
                                                 struct siderust_search_opts_t opts,
                                                 tempoch_period_mjd_t **out,
                                                 uintptr_t *count);

// Azimuth of a star at an instant (degrees, North-clockwise).

siderust_status_t siderust_star_azimuth_at(const struct SiderustStar *handle,
                                           struct siderust_geodetic_t observer,
                                           double mjd,
                                           double *out_deg);

// Azimuth bearing-crossing events for a star.

siderust_status_t siderust_star_azimuth_crossings(const struct SiderustStar *handle,
                                                  struct siderust_geodetic_t observer,
                                                  tempoch_period_mjd_t window,
                                                  double bearing_deg,
                                                  struct siderust_search_opts_t opts,
                                                  struct siderust_azimuth_crossing_event_t **out,
                                                  uintptr_t *count);

// Azimuth of an ICRS direction at an instant.
//
// `dir.frame` must equal `SIDERUST_FRAME_T_ICRS`; otherwise
// `SIDERUST_STATUS_T_INVALID_FRAME` is returned.

siderust_status_t siderust_icrs_azimuth_at(struct siderust_spherical_dir_t dir,
                                           struct siderust_geodetic_t observer,
                                           double mjd,
                                           double *out_deg);

// Azimuth bearing-crossing events for an ICRS direction.

siderust_status_t siderust_icrs_azimuth_crossings(struct siderust_spherical_dir_t dir,
                                                  struct siderust_geodetic_t observer,
                                                  tempoch_period_mjd_t window,
                                                  double bearing_deg,
                                                  struct siderust_search_opts_t opts,
                                                  struct siderust_azimuth_crossing_event_t **out,
                                                  uintptr_t *count);

// Look up a star from the built-in catalog by name.
//
// Supported names: "VEGA", "SIRIUS", "POLARIS", "CANOPUS", "ARCTURUS",
// "RIGEL", "BETELGEUSE", "PROCYON", "ALDEBARAN", "ALTAIR".
//
// On success, `*out` receives a newly allocated handle.
// The caller must free it with `siderust_star_free`.
 siderust_status_t siderust_star_catalog(const char *name, struct SiderustStar **out);

// Create a custom star.
//
// `name` — UTF-8 null-terminated string.
// `ra_deg`, `dec_deg` — J2000 equatorial coordinates in degrees.
// `distance_ly` — distance in light-years.
// `epoch_jd` — epoch of the given coordinates (Julian Date).
// `proper_motion` — optional: pass null for a fixed star.

siderust_status_t siderust_star_create(const char *name,
                                       double distance_ly,
                                       double mass_solar,
                                       double radius_solar,
                                       double luminosity_solar,
                                       double ra_deg,
                                       double dec_deg,
                                       double epoch_jd,
                                       const struct siderust_proper_motion_t *proper_motion,
                                       struct SiderustStar **out);

// Free a Star handle.
//
// # Safety
// The handle must have been allocated by `siderust_star_catalog` or
// `siderust_star_create`, and must not be used after this call.
 void siderust_star_free(struct SiderustStar *handle);

// Get the star's name. Copies into `buf` up to `buf_len` bytes (including NUL).
// Sets `*written` to the number of bytes written (excluding NUL).
// Returns InvalidArgument if the buffer is too small.

siderust_status_t siderust_star_name(const struct SiderustStar *handle,
                                     char *buf,
                                     uintptr_t buf_len,
                                     uintptr_t *written);

// Get the star's distance in light-years.
 double siderust_star_distance_ly(const struct SiderustStar *handle);

// Get the star's mass in solar masses.
 double siderust_star_mass_solar(const struct SiderustStar *handle);

// Get the star's radius in solar radii.
 double siderust_star_radius_solar(const struct SiderustStar *handle);

// Get the star's luminosity in solar luminosities.
 double siderust_star_luminosity_solar(const struct SiderustStar *handle);

// Get Mercury's orbital and physical parameters.
 siderust_status_t siderust_planet_mercury(struct siderust_planet_t *out);

// Get Venus's orbital and physical parameters.
 siderust_status_t siderust_planet_venus(struct siderust_planet_t *out);

// Get Earth's orbital and physical parameters.
 siderust_status_t siderust_planet_earth(struct siderust_planet_t *out);

// Get Mars's orbital and physical parameters.
 siderust_status_t siderust_planet_mars(struct siderust_planet_t *out);

// Get Jupiter's orbital and physical parameters.
 siderust_status_t siderust_planet_jupiter(struct siderust_planet_t *out);

// Get Saturn's orbital and physical parameters.
 siderust_status_t siderust_planet_saturn(struct siderust_planet_t *out);

// Get Uranus's orbital and physical parameters.
 siderust_status_t siderust_planet_uranus(struct siderust_planet_t *out);

// Get Neptune's orbital and physical parameters.
 siderust_status_t siderust_planet_neptune(struct siderust_planet_t *out);

// Transform a spherical direction from one frame to another.
//
// `jd` is required for time-dependent frames (mean/true of date, horizontal).
// For time-independent transforms between fixed-epoch frames, the JD value
// is ignored but must still be provided.
//
// Supported source/target frames: ICRS, EclipticMeanJ2000, EquatorialMeanJ2000,
// EquatorialMeanOfDate, EquatorialTrueOfDate.
//
// For conversion to Horizontal, use `siderust_spherical_dir_to_horizontal`.

siderust_status_t siderust_spherical_dir_transform_frame(double polar_deg,
                                                         double azimuth_deg,
                                                         siderust_frame_t src_frame,
                                                         siderust_frame_t dst_frame,
                                                         double jd,
                                                         struct siderust_spherical_dir_t *out);

// Transform a spherical direction to the horizontal (alt-az) frame.
//
// Requires an observer location (geodetic WGS84) and a Julian Date.
// Supported source frames: ICRS, EclipticMeanJ2000, EquatorialMeanJ2000,
// EquatorialMeanOfDate, EquatorialTrueOfDate.

siderust_status_t siderust_spherical_dir_to_horizontal(double polar_deg,
                                                       double azimuth_deg,
                                                       siderust_frame_t src_frame,
                                                       double jd,
                                                       struct siderust_geodetic_t observer,
                                                       struct siderust_spherical_dir_t *out);

// Create a geodetic position and convert to ECEF Cartesian.

siderust_status_t siderust_geodetic_to_cartesian_ecef(struct siderust_geodetic_t geodetic,
                                                      struct siderust_cartesian_pos_t *out);

// Get the Sun's barycentric position (EclipticMeanJ2000, AU) via VSOP87.
 siderust_status_t siderust_vsop87_sun_barycentric(double jd, struct siderust_cartesian_pos_t *out);

// Get the Earth's barycentric position (EclipticMeanJ2000, AU) via VSOP87.

siderust_status_t siderust_vsop87_earth_barycentric(double jd,
                                                    struct siderust_cartesian_pos_t *out);

// Get the Earth's heliocentric position (EclipticMeanJ2000, AU) via VSOP87.

siderust_status_t siderust_vsop87_earth_heliocentric(double jd,
                                                     struct siderust_cartesian_pos_t *out);

// Get the Moon's geocentric position (EclipticMeanJ2000, km) via ELP2000.
 siderust_status_t siderust_vsop87_moon_geocentric(double jd, struct siderust_cartesian_pos_t *out);

// Fill `out` with the Roque de los Muchachos observatory (La Palma, Spain).
 siderust_status_t siderust_observatory_roque_de_los_muchachos(struct siderust_geodetic_t *out);

// Fill `out` with the El Paranal observatory (Chile).
 siderust_status_t siderust_observatory_el_paranal(struct siderust_geodetic_t *out);

// Fill `out` with the Mauna Kea observatory (Hawaiʻi, USA).
 siderust_status_t siderust_observatory_mauna_kea(struct siderust_geodetic_t *out);

// Fill `out` with the La Silla observatory (Chile).
 siderust_status_t siderust_observatory_la_silla(struct siderust_geodetic_t *out);

// Create a custom geodetic position (WGS84/ECEF).

siderust_status_t siderust_geodetic_new(double lon_deg,
                                        double lat_deg,
                                        double height_m,
                                        struct siderust_geodetic_t *out);

// Free an array of phase events.
 void siderust_phase_events_free(struct siderust_phase_event_t *ptr, uintptr_t count);

// Compute geocentric Moon phase geometry at `jd` (Julian Date).

siderust_status_t siderust_moon_phase_geocentric(double jd,
                                                 struct siderust_moon_phase_geometry_t *out);

// Compute topocentric Moon phase geometry at `jd` for `observer`.

siderust_status_t siderust_moon_phase_topocentric(double jd,
                                                  struct siderust_geodetic_t observer,
                                                  struct siderust_moon_phase_geometry_t *out);

// Map phase geometry to a named phase label.

siderust_status_t siderust_moon_phase_label(struct siderust_moon_phase_geometry_t geom,
                                            siderust_moon_phase_label_t *out);

// Find all principal lunar phase events in `window`.
//
// Results are sorted chronologically. The caller must free the array
// with [`siderust_phase_events_free`].

siderust_status_t siderust_find_phase_events(tempoch_period_mjd_t window,
                                             struct siderust_search_opts_t opts,
                                             struct siderust_phase_event_t **out,
                                             uintptr_t *count);

// Find windows where geocentric Moon illumination is above `k_min` ∈ [0,1].

siderust_status_t siderust_moon_illumination_above(tempoch_period_mjd_t window,
                                                   double k_min,
                                                   struct siderust_search_opts_t opts,
                                                   tempoch_period_mjd_t **out,
                                                   uintptr_t *count);

// Find windows where geocentric Moon illumination is below `k_max` ∈ [0,1].

siderust_status_t siderust_moon_illumination_below(tempoch_period_mjd_t window,
                                                   double k_max,
                                                   struct siderust_search_opts_t opts,
                                                   tempoch_period_mjd_t **out,
                                                   uintptr_t *count);

// Find windows where Moon illumination is within [k_min, k_max].

siderust_status_t siderust_moon_illumination_range(tempoch_period_mjd_t window,
                                                   double k_min,
                                                   double k_max,
                                                   struct siderust_search_opts_t opts,
                                                   tempoch_period_mjd_t **out,
                                                   uintptr_t *count);

// Create a new target from right ascension and declination (degrees) and epoch
// (Julian Date).
//
// On success, writes a newly-allocated pointer to `*out`.
// The caller must free it with [`siderust_target_free`].

siderust_status_t siderust_target_create(double ra_deg,
                                         double dec_deg,
                                         double epoch_jd,
                                         struct SiderustTarget **out);

// Free a target handle created by [`siderust_target_create`].
//
// # Safety
// The handle must not be used after this call.
 void siderust_target_free(struct SiderustTarget *handle);

// Write the right ascension (degrees) to `*out`.
 siderust_status_t siderust_target_ra_deg(const struct SiderustTarget *handle, double *out);

// Write the declination (degrees) to `*out`.
 siderust_status_t siderust_target_dec_deg(const struct SiderustTarget *handle, double *out);

// Write the reference epoch (Julian Date) to `*out`.
 siderust_status_t siderust_target_epoch_jd(const struct SiderustTarget *handle, double *out);

// Altitude of the target (radians).

siderust_status_t siderust_target_altitude_at(const struct SiderustTarget *handle,
                                              struct siderust_geodetic_t observer,
                                              double mjd,
                                              double *out_rad);

// Periods when the target is above `threshold_deg`.

siderust_status_t siderust_target_above_threshold(const struct SiderustTarget *handle,
                                                  struct siderust_geodetic_t observer,
                                                  tempoch_period_mjd_t window,
                                                  double threshold_deg,
                                                  struct siderust_search_opts_t opts,
                                                  tempoch_period_mjd_t **out,
                                                  uintptr_t *count);

// Altitude crossing events for the target.

siderust_status_t siderust_target_crossings(const struct SiderustTarget *handle,
                                            struct siderust_geodetic_t observer,
                                            tempoch_period_mjd_t window,
                                            double threshold_deg,
                                            struct siderust_search_opts_t opts,
                                            struct siderust_crossing_event_t **out,
                                            uintptr_t *count);

// Culmination events for the target.

siderust_status_t siderust_target_culminations(const struct SiderustTarget *handle,
                                               struct siderust_geodetic_t observer,
                                               tempoch_period_mjd_t window,
                                               struct siderust_search_opts_t opts,
                                               struct siderust_culmination_event_t **out,
                                               uintptr_t *count);

// Azimuth of the target (degrees, North-clockwise).

siderust_status_t siderust_target_azimuth_at(const struct SiderustTarget *handle,
                                             struct siderust_geodetic_t observer,
                                             double mjd,
                                             double *out_deg);

// Azimuth bearing-crossing events for the target.

siderust_status_t siderust_target_azimuth_crossings(const struct SiderustTarget *handle,
                                                    struct siderust_geodetic_t observer,
                                                    tempoch_period_mjd_t window,
                                                    double bearing_deg,
                                                    struct siderust_search_opts_t opts,
                                                    struct siderust_azimuth_crossing_event_t **out,
                                                    uintptr_t *count);

#ifdef __cplusplus
}  // extern "C"
#endif  // __cplusplus

#endif  /* SIDERUST_FFI_H */
